<h2 style="text-align:center;margin-top:50px;">Welcome {{user.username}}!</h2>
<h1 style="text-align:center;">Account Panel</h1>

{% if user.is_authenticated %}
<button id="logout-btn" value="Logout" onclick="location.href = '/login'">
    Logout</button>
<!-- <a href = "{% url 'login' %}">Logout</a> -->
{% endif %}

<marquee scrollamount="18.5" behavior="slide" direction="up">
    {% for message in messages %}
    {% if message.tags == "error" %}
    <p id="messageError">{{message}}</p>
    {% else %}
    <p id="messages">{{message}}</p>
    {% endif %}
    {% endfor %}
</marquee>

<button style="margin-left:1080px;margin-top:0px;" onclick="location.href = '/atm-status'">View ATM Status</button>
<button style="margin-left:1080px;margin-top:0px;" onclick="location.href = '/add-card'">Add Card</button>


<h1 style="margin-left:200px;margin-top:-50px;">Created Card(s):</h1>
<p4 style="margin-left:695px;margin-top:-50px;">Click to view details</p4>
<div style="text-align: center;">
    <h1>
        {% for data in card %}
        {% if data.card_name %}
        <button method="post" name="{{data.card_name}}" class="card-btn"
            onclick="location.href='card-details/?card_name={{data.card_name}}'">{{data.card_name}}</button>
        {% endif %}
        {% endfor %}
    </h1>
</div>

<button class="transaction-btn" "type=" submit" onclick="withdrawlformOpen()">Cash Withdrawal</button>
<button class="transaction-btn" style="margin-top:-22px;" "type=" submit"
    onclick="transferFormOpen()">Transfer</button>

<form id="withdrawlForm" style="display:none;" action="" method="post">
    {% csrf_token %}
    <div style="margin-left:620px">
        <input type="text" name="Card Number" placeholder="Card Number..." class="form-control">
    </div>

    <div style="margin-left:620px">
        <input type="number" name="Pin" placeholder="Pin..." class="form-control">
    </div>

    <div style="margin-left:620px">
        <input type="number" name="Amount" placeholder="Amount..." class="form-control">
    </div>

    <button class="cancel-button" onclick="formOpen()">Cancel</button>
    <button type="submit">Confirm</button>
    
</form>



<form id="transferForm" style="display:none;" action="" method="post">
    {% csrf_token %}
    <div style="margin-left:620px">
        <input type="text" name="Your Card Number" placeholder=" Your Card Number..." class="form-control">
    </div>

    <div style="margin-left:620px">
        <input type="number" name="Pin" placeholder="Pin..." class="form-control">
    </div>

    <div style="margin-left:620px">
        <input type="number" name="Receiver Account number" placeholder="Receiver's Account number..."
            class="form-control">
    </div>

    <button class="cancel-button" onclick="formOpen()">Cancel</button>
    <button onclick="location.href='card-details/?name={{data.card_name}}'">Confirm</button>
</form>

<script>
    function withdrawlformOpen() {
        var form = document.getElementById('withdrawlForm');
        if (form.style.display == "none")
            form.style.display = '';
        else {
            form.style.display = "none";
        }
    }

    function transferFormOpen() {
        var form = document.getElementById('transferForm');
        if (form.style.display == "none")
            form.style.display = '';
        else {
            form.style.display = "none";
        }
    }

    function reply_click(clicked_class) {
        var x = clicked_class.getAttribute("name");

        document.getElementsByClassName("card-details")[0].innerHTML = x;
    }

</script>

<style>
    #messages {
        text-align: center;
        font-size: 18;
        background-color: rgb(78, 216, 147);
        color: #fff;
        padding: 50px;
        width: 200px;
        height: 24px;
        margin-top: -35px;
        margin-left: 650px;
    }

    #messageError {
        text-align: center;
        font-size: 18;
        background-color: rgb(241, 210, 123);
        color: #fff;
        padding: 29px;
        width: 500px;
        height: -3px;
        margin-top: 20px;
        margin-left: 520px;
    }

    button {
        font-size: 18;
        background-color: #5ea8ee;
        color: rgb(250, 250, 250);
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        cursor: pointer;
        width: 10%;
    }

    button:hover {
        opacity: 0.8;
    }

    #logout-btn {
        background-color: #ee635e;
        margin-left: 1080px;
    }

    .card-btn {
        background-color: wheat;
        color: rgb(0, 0, 0);
        padding: 14px 20px;
        margin: 8px 0;
        cursor: pointer;
        width: 8%;
    }

    .card-btn:hover {
        opacity: 0.8;
    }

    input[type=text],
    input[type=number] {
        width: 30%;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }

    .transaction-btn {
        font-size: 18;
        background-color: #5ea8ee;
        color: rgb(250, 250, 250);
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        cursor: pointer;
        width: 10%;
        margin-left: 1080px;
        margin-top: -100px;
    }

    .cancel-button {
        background-color: #ee685e;
        color: rgb(250, 250, 250);
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        cursor: pointer;
        width: 10%;
        margin-left: 600px;
    }
</style>